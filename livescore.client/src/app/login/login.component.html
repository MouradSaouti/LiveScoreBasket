<div class="page-container">
  <mat-card class="login-container">
    <mat-card-header class="login-header">
      <mat-card-title>{{ isLoginMode ? 'Connexion' : 'Inscription' }}</mat-card-title>
    </mat-card-header>

    <mat-card-content>
      <form *ngIf="isLoginMode" [formGroup]="loginForm" (ngSubmit)="onLogin()">
        <!-- Formulaire de connexion -->
        <div class="form-group">
          <label for="username">Nom d'utilisateur</label>
          <mat-form-field appearance="outline" class="form-field">
            <input matInput id="username" formControlName="username" required />
            <mat-error *ngIf="loginForm.get('username')?.hasError('required')">
              Nom d'utilisateur est obligatoire
            </mat-error>
          </mat-form-field>
        </div>

        <div class="form-group">
          <label for="password">Mot de passe</label>
          <mat-form-field appearance="outline" class="form-field">
            <input matInput type="password" id="password" formControlName="password" required />
            <mat-error *ngIf="loginForm.get('password')?.hasError('required')">
              Mot de passe est obligatoire
            </mat-error>
          </mat-form-field>
        </div>

        <button mat-raised-button class="submit-button" type="submit" [disabled]="isLoading || !loginForm.valid">
          Se connecter
        </button>
      </form>

      <form *ngIf="!isLoginMode" [formGroup]="registerForm" (ngSubmit)="onRegister()">
        <!-- Formulaire d'inscription -->
        <div class="form-group">
          <label for="username">Nom d'utilisateur</label>
          <mat-form-field appearance="outline" class="form-field">
            <input matInput id="username" formControlName="username" required />
            <mat-error *ngIf="registerForm.get('username')?.hasError('required')">
              Nom d'utilisateur est obligatoire
            </mat-error>
          </mat-form-field>
        </div>

        <div class="form-group">
          <label for="password">Mot de passe</label>
          <mat-form-field appearance="outline" class="form-field">
            <input matInput type="password" id="password" formControlName="password" required />
            <mat-error *ngIf="registerForm.get('password')?.hasError('required')">
              Mot de passe est obligatoire
            </mat-error>
          </mat-form-field>
        </div>

        <button mat-raised-button class="submit-button" type="submit" [disabled]="isLoading || !registerForm.valid">
          S'inscrire
        </button>
      </form>

      <div *ngIf="error" class="error-message">
        {{ error }}
      </div>
    </mat-card-content>

    <mat-card-actions>
      <button mat-button (click)="toggleMode()">
        {{ isLoginMode ? "Pas de compte ? Inscrivez-vous" : "Déjà un compte ? Connectez-vous" }}
      </button>
    </mat-card-actions>
  </mat-card>
</div>
